<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>Scoreboard</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      background: #BFBDBA; 
	  background-repeat: no-repeat;
	  background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      /*justify-content: flex-start;*/
      min-height: 100vh;
      margin: 0;
      padding: 1%;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 600px;
      margin-bottom: 2%;
    }

    .player-name {
      flex: 1;
      padding: 1%;
      font-size: 1rem;
      border: 2px solid #ccc;
      border-radius: 5%;
      text-align: center;
	  width: 40%;
    }

    .score-display {
	  background: linear-gradient(to right, #457B9D, #C44536);
      flex: 0.5;
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
      background-color: #dad7cd;
      color: white;
      padding: 5px 10px;
      border-radius: 10%;
      margin: 0 0.5%;
	  white-space: nowrap;
    }

    .round-container {
      width: 100%;
	  justify-content: center;
      max-width: 600px;
      background-color: #dad7cd;
      border-radius: 1%;
      box-shadow: 0 2% 5% rgba(0,0,0,0.1);
      margin-bottom: 15%;
	  margin-left: auto;
	  margin-right: auto;
	  margin: 3% 0px;  
	  padding-top: 0.5%;
	  padding-bottom: 0.5%;
    }

    .round-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 2%;
    }

    .players-row {
      display: flex;
      justify-content: space-between;
    }

    .player-side {
      flex: 1;
      padding: 0.5%;
	  /*background-color: #A8DADC;*/
	  margin: 0px 0.5%;
    }

    .controls {
      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      gap: 0.5%;
    }

    button {
      background-color: #5F6659;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 0.1% 0.1%;
      cursor: pointer;
      font-size: 0.9rem;
      flex: 1 1 30%;
      transition: background-color 0.2s;
    }

    button:hover {
      background-color: #E09F3E;
    }

    button.toggled {
      background-color: #772E25 !important;
    }

    .battle-tactics {
      display: flex;
      align-items: center;
      justify-content: left;
      gap: 1%;
      margin-top: 8px;
    }

    .battle-tactics label {
      font-weight: bold;
    }

    /* Bigger checkboxes for mobile use */
    .battle-tactics input[type="checkbox"] {
      transform: scale(1.5);
      cursor: pointer;
	  accent-color: #5F6659;
    }

    .twist-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      margin-top: 8px;
    }

    .twist-controls span {
      font-weight: bold;
    }

    .twist-controls button {
      width: 35%;
      height: 35px;
      padding: 0;
      font-size: 1.2rem;
      font-weight: bold;
    }

    .twist-score {
      font-weight: bold;
      font-size: 1.1rem;
      min-width: 30px;
      text-align: center;
    }

    .reset-container {
      margin-top: 20px;
	  align: middle
    }

    .reset-button {
      background-color: #dc3545;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
    }

    .reset-button:hover {
      background-color: #b52b38;
    }
  </style>
</head>
<body>
  <div class="header">
    <input type="text" id="player1Name" class="player-name" placeholder="Player 1 Name" />
    <div class="score-display" id="scoreDisplay">0 - 0</div>
    <input type="text" id="player2Name" class="player-name" placeholder="Player 2 Name" />
  </div>

  <div id="roundsContainer"></div>

  <div class="reset-container">
    <button class="reset-button" id="resetAllBtn">Reset All</button>
  </div>

  <script>
    const roundsContainer = document.getElementById("roundsContainer");
    const scoreDisplay = document.getElementById("scoreDisplay");

    let player1Base = 0;
    let player2Base = 0;

    // Track per-round twist scores
    const twistScores = {
      1: { 1: 0, 2: 0 },
      2: { 1: 0, 2: 0 },
      3: { 1: 0, 2: 0 },
      4: { 1: 0, 2: 0 }
    };

    function getTotalTwist(player) {
      let total = 0;
      for (let r = 1; r <= 4; r++) total += twistScores[r][player];
      return total;
    }

    function updateScore() {
      const total1 = player1Base + getTotalTwist(1);
      const total2 = player2Base + getTotalTwist(2);
      scoreDisplay.textContent = `${total1} - ${total2}`;
    }

    function addScore(player, amount) {
      if (player === 1) player1Base += amount;
      else player2Base += amount;
      updateScore();
    }

    function updateTwistDisplay(round, player) {
      const el = document.getElementById(`twistDisplay${player}_r${round}`);
      el.textContent = twistScores[round][player];
    }

    // Build 4 rounds dynamically
    for (let round = 1; round <= 4; round++) {
      const roundDiv = document.createElement("div");
      roundDiv.classList.add("round-container");
      roundDiv.innerHTML = `
        <div class="round-title">Battle Round ${round}</div>
        <div class="players-row">

          <!-- Player 1 -->
          <div class="player-side">
            <div class="controls">
              <button class="toggle-btn" data-player="1" data-round="${round}">Control 1+</button>
              <button class="toggle-btn" data-player="1" data-round="${round}">Control 2+</button>
              <button class="toggle-btn" data-player="1" data-round="${round}">Control More</button>
            </div>

            <div class="battle-tactics">
              <label>Battle Tactics:</label>
              <input type="checkbox" class="battle" data-player="1" data-round="${round}">
              <input type="checkbox" class="battle" data-player="1" data-round="${round}">
              <input type="checkbox" class="battle" data-player="1" data-round="${round}">
            </div>

            <div class="twist-controls">
              <span>Twist:</span>
              <button class="twist-btn" data-player="1" data-round="${round}" data-change="-1">-</button>
              <span class="twist-score" id="twistDisplay1_r${round}">0</span>
              <button class="twist-btn" data-player="1" data-round="${round}" data-change="1">+</button>
            </div>
          </div>

          <!-- Player 2 -->
          <div class="player-side">
            <div class="controls">
              <button class="toggle-btn" data-player="2" data-round="${round}">Control 1+</button>
              <button class="toggle-btn" data-player="2" data-round="${round}">Control 2+</button>
              <button class="toggle-btn" data-player="2" data-round="${round}">Control More</button>
            </div>

            <div class="battle-tactics">
              <label>Battle Tactics:</label>
              <input type="checkbox" class="battle" data-player="2" data-round="${round}">
              <input type="checkbox" class="battle" data-player="2" data-round="${round}">
              <input type="checkbox" class="battle" data-player="2" data-round="${round}">
            </div>

            <div class="twist-controls">
              <span>Twist:</span>
              <button class="twist-btn" data-player="2" data-round="${round}" data-change="-1">-</button>
              <span class="twist-score" id="twistDisplay2_r${round}">0</span>
              <button class="twist-btn" data-player="2" data-round="${round}" data-change="1">+</button>
            </div>
          </div>
        </div>
      `;
      roundsContainer.appendChild(roundDiv);
    }

    // Handle button clicks
    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("toggle-btn")) {
        const btn = e.target;
        const player = parseInt(btn.dataset.player);
        if (!btn.classList.contains("toggled")) {
          btn.classList.add("toggled");
          addScore(player, 1);
        } else {
          btn.classList.remove("toggled");
          addScore(player, -1);
        }
      }

      // Twist buttons
      if (e.target.classList.contains("twist-btn")) {
        const player = parseInt(e.target.dataset.player);
        const round = parseInt(e.target.dataset.round);
        const change = parseInt(e.target.dataset.change);

        twistScores[round][player] = Math.max(0, twistScores[round][player] + change);
        updateTwistDisplay(round, player);
        updateScore();
      }
    });

    // Handle Battle Tactics checkboxes
    document.addEventListener("change", (e) => {
      if (e.target.classList.contains("battle")) {
        const player = parseInt(e.target.dataset.player);
        addScore(player, e.target.checked ? 1 : -1);
      }
    });

    // Reset All button
    document.getElementById("resetAllBtn").addEventListener("click", () => {
      player1Base = 0;
      player2Base = 0;

      for (let r = 1; r <= 4; r++) {
        twistScores[r][1] = 0;
        twistScores[r][2] = 0;
        updateTwistDisplay(r, 1);
        updateTwistDisplay(r, 2);
      }

      document.querySelectorAll(".toggle-btn").forEach(b => b.classList.remove("toggled"));
      document.querySelectorAll(".battle").forEach(c => c.checked = false);

      updateScore();
    });

    // Initialize
    updateScore();
  </script>
</body>
</html>
